<link type="text/css" href="css/games.css" rel="stylesheet">

<div class="row" style="height: 110px; background-color: white; border-bottom: 1px solid #e7e7e7;">
    <div class="row">
        <div class="col-md-12">
            <h2 style="padding-left: 15px;">View your games</h2>
            <p style="padding-left: 15px;">View your list of pending, current, and past games.</p>
        </div>
    </div>
</div>
<div class="col-md-12" style="padding-top: 15px; background-color: #EDF2F6;">
    <div class="mui-container" style="height: 100%;">
        <h5 style="color: #757E8D;"><b>PENDING MATCHES</b></h5>
        <div class="mui-panel" style="padding-top: 10px;">
            <p style="padding-top: 5px;">Current list of matchest that are still pending.</p>
            <br />
            <table class="mui-table mui-table--bordered">
                <thead>
                    <tr>
                        <th width="25%"> Sport </th>
                        <th width="25%"> Opponent </th>
                        <th width="25%"> Accept </th>
                        <th width="25%"> Decline </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in games_pending">
                        <td ng-init="item.sport_name=getSport(item)">
                            <div class="mui--text-body2" style="margin-top: 10px; margin-left: 3px;">{{ item.sport_name }}</div>
                            
                        </td>
                        <!--<td ng-init="item.opponent=getUser(item)">{{ item.opponent }}</td>-->
                        <td ng-init="item.opponent=getUser(item)"><a target="_blank" href="#/user_profile/{{ item.player2_id }}" class="mui--text-body2">{{ item.opponent }}</a></td>
                        <td>
                            <button ng-click="accept(item.id); sendOpponentEmail(item)" class="mui-btn mui-btn--raised mui-btn--small">Accept</button>
                        </td>
                        <td>
                            <button ng-click="decline(item.id)" class="mui-btn mui-btn--raised mui-btn--small">Decline</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p class="text-center">{{ no_games_pending }}</p>
        </div>
    </div>
</div>
<div class="col-md-12" style="padding-top: 15px; background-color: #EDF2F6;">
    <div class="mui-container" style="height: 100%;">
        <h5 style="color: #757E8D;"><b>CURRENT MATCHES</b></h5>
        <div class="mui-panel" style="padding-top: 10px;">
            <p style="padding-top: 5px;">List of matches that are currently ongoing, and require results.</p>
            <br />
            <table class="mui-table mui-table--bordered">
                <thead>
                    <tr>
                        <th width="25%"> Sport </th>
                        <th width="25%"> Opponent </th>
                        <th width="25%"> Edit </th>
                        <th width="25%"> Finish </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in gamesip">
                        <td ng-init="item.sport_name=getSport(item)">
                        <div class="mui--text-body2" style="margin-top: 10px; margin-left: 3px;">
                            {{ item.sport_name }}</td>
                            </div>
                        <td ng-init="item.opponent=getUser(item)">
                        <div class="mui--text-body2" style="margin-top: 10px; margin-left: 3px;">
                            {{ item.opponent }}
                            </div></td>
                        <td>
                            <button class="mui-btn mui-btn--raised mui-btn--small" ng-click="setModal(item)" data-toggle="modal" data-target="#gameModal"> Details</button>
                        </td>
                        <td>
                            <button class="mui-btn mui-btn--raised mui-btn--small" ng-click="setModal(item)" data-toggle="modal" data-target="#gameFinishModal"> Finish Game!</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p class="text-center">{{ no_games_ip }}</p>
        </div>
    </div>
</div>
<div class="col-md-12" style="padding-top: 15px; background-color: #EDF2F6;">
    <div class="mui-container" style="height: 100%;">
        <h5 style="color: #757E8D;"><b>PAST MATCHES</b></h5>
        <div class="mui-panel" style="padding-top: 10px;">
            <p style="padding-top: 5px;">List of past or finished matches.</p>
            <br />
            <table class="mui-table mui-table--bordered">
                <thead>
                    <tr>
                        <th width="25%"> Sport </th>
                        <th width="25%"> Opponent </th>
                        <th width="25%"> Date </th>
                        <th width="25%"> Results </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in past_games">
                        <td ng-init="item.sport_name=getSport(item)">{{ item.sport_name }}</td>
                        <td ng-init="item.opponent=getUser(item)">{{ item.opponent }}</td>
                        <td>{{ item.date }}</td>
                        <td>{{ item.results }}</td>
                    </tr>
                </tbody>
            </table>
            <p class="text-center">{{ no_past_games }}</p>
        </div>
    </div>
</div>
<!-- Game Modal -->
<div class="modal fade" id="gameModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Game Details</h4>
            </div>
            <div class="modal-body">
                <form id="editGameDetails">
                    Opponent:
                    <p class="pull-right">{{modalObject.opponent}}</p>
                    <br>
                    <br>Facility:<span class="pull-right"><select class="form-control">
                                                                    <option value="{{modalObject.facility_id}}" ng-repeat="item in allFacilities">{{ item.name }}</option>
                                                                </select></span>
                    <br>
                    <br>Date:<span class="pull-right"><input type="date" value="{{modalObject.date}}"/></span>
                    <br>
                    <br>Time:<span class="pull-right"><input type="time" value="{{modalObject.time}}"/></span>
                    <br>
                    <br>
                    <select class="form-control">
                        <option value="{{modalObject.sport_id}}" ng-repeat="item in allSports">{{ item.name }}</option>
                    </select>
                </form>
            </div>
            <div class="modal-footer">
                <p class="pull-left">{{password_message}}</p>
                <button type="button" class="mui-btn mui-btn--raised" data-dismiss="modal">Cancel</button>
                <button type="button" ng-click="updateInfo()" class="mui-btn mui-btn--raised mui-btn--primary" data-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>
</div>
<!-- Finish Modal -->
<div class="modal fade" id="gameFinishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Finish Game</h4>
            </div>
            <div class="modal-body">
                <form id="gameFinish">
                    <p class="text-center">Please Enter Results</p>
                    <br>{{$root.userObject.first_name}} {{$root.userObject.last_name}}
                    <input ng-blur="getWinner()" ng-model="your_score" class="pull-right" type="number" min="0" />
                    <br>
                    <br>{{modalObject.opponent}}
                    <input ng-blur="getWinner()" ng-model="opponent_score" class="pull-right" type="number" min="0" />
                    <br>
                    <br>Winner: {{ game_results }}
                </form>
            </div>
            <div class="modal-footer">
                <p class="pull-left">{{password_message}}</p>
                <button type="button" class="mui-btn mui-btn--raised" data-dismiss="modal">Cancel</button>
                <button type="button" ng-click="finishGame()" class="mui-btn mui-btn--raised mui-btn--primary" data-dismiss="modal">Save Score!</button>
            </div>
        </div>
    </div>
</div>
</div>
